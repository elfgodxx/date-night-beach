<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Starry Night at the Beach</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: 'Segoe UI', system-ui, -apple-system, Roboto, sans-serif;
    color: white;
    text-align: center;
    overflow: hidden;
    background: #000;
  }
  canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display:block; }
  #ocean { z-index: 0; }
  #stars { z-index: 1; }
  #fireworks { z-index: 3; pointer-events: none; }

  .overlay {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.6);
    display: flex; justify-content: center; align-items: center;
    z-index: 10; transition: opacity 0.8s ease;
  }
  .content {
    position: relative; z-index: 5; top: 50%; transform: translateY(-50%);
    display: flex; flex-direction: column; align-items: center; gap: 15px;
  }
  button {
    padding: 1em 2em; font-size: 1.1em; border: none; border-radius: 999px; cursor: pointer;
    background: linear-gradient(135deg,#ff85b7,#7aa2ff); color:#0b0f2a; font-weight:700;
    box-shadow:0 10px 30px rgba(122,162,255,.35), inset 0 -2px 0 rgba(255,255,255,.35);
  }
  #beginButton { background: #f5a623; color: white; box-shadow:none; border-radius:10px; }
  #invite-message { display: none; font-size: 1.4em; color: #ffebcd; text-shadow: 0 0 10px rgba(255,255,255,0.8); max-width: 90%; margin-top: 20px; }
</style>
</head>
<body>
  <canvas id="ocean"></canvas>
  <canvas id="stars"></canvas>
  <canvas id="fireworks"></canvas>

  <div class="overlay" id="overlay">
    <button id="beginButton">Begin</button>
  </div>

  <div class="content">
    <h1>Hi Sophia,</h1>
    <p>How about a night at Uraya Beach Sands?</p>
    <button id="sayYes">Say Yes âœ¨</button>
    <div id="invite-message">Sophia, I canâ€™t wait to hold your hand at Uraya Beach Sands ðŸŒŠ and watch the stars with you all night âœ¨</div>
  </div>

  <audio id="oceanSound" src="assets/ocean-waves.mp3" loop></audio>

<script>
// ---------- helpers ----------
const DPR = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
function sizeCanvas(c){ c.width = Math.floor(c.clientWidth * DPR); c.height = Math.floor(c.clientHeight * DPR); }
function rand(a,b){ return Math.random()*(b-a)+a; }

// ---------- overlay + audio ----------
const overlay = document.getElementById('overlay');
const beginButton = document.getElementById('beginButton');
const oceanSound = document.getElementById('oceanSound');
beginButton.addEventListener('click', () => {
  oceanSound.play().catch(()=>{});
  overlay.style.opacity = '0';
  setTimeout(() => overlay.style.display = 'none', 800);
});

// ==================================================
// OCEAN (stylized gradient + wave lines)
// ==================================================
(function ocean(){
  const canvas = document.getElementById('ocean');
  const ctx = canvas.getContext('2d');
  let t = 0, W=0, H=0;
  function resize(){ sizeCanvas(canvas); W=canvas.width; H=canvas.height; }
  window.addEventListener('resize', resize); resize();

  function draw(){
    ctx.clearRect(0,0,W,H);
    // night sky backdrop gradient
    const sky = ctx.createLinearGradient(0,0,0,H);
    sky.addColorStop(0,'#0b0d26');
    sky.addColorStop(.55,'#14183a');
    ctx.fillStyle = sky; ctx.fillRect(0,0,W,H);

    // ocean body
    const horizon = H*0.42;
    const oceanG = ctx.createLinearGradient(0,horizon,0,H);
    oceanG.addColorStop(0,'#062a59');
    oceanG.addColorStop(.6,'#0a4a86');
    oceanG.addColorStop(1,'#0b5fa1');
    ctx.fillStyle = oceanG; ctx.fillRect(0,horizon,W,H-horizon);

    // wave bands (perspective-ish)
    ctx.lineWidth = 1.5*DPR; ctx.strokeStyle = 'rgba(255,255,255,.35)';
    for(let i=0;i<6;i++){
      const y = horizon + i*18*DPR;
      const amp = (8 - i*1.2)*DPR; const k = 0.02 + i*0.003; const sp = 0.9 + i*0.15;
      ctx.beginPath();
      for(let x=0;x<=W;x+=3*DPR){
        const yy = y + Math.sin(x*k + t*sp)*amp;
        if(x===0) ctx.moveTo(x,yy); else ctx.lineTo(x,yy);
      }
      ctx.globalAlpha = 0.35 - i*0.04; ctx.stroke(); ctx.globalAlpha = 1;
    }

    // sandy shore
    const sandY = H*0.82;
    const sand = ctx.createLinearGradient(0,sandY,0,H);
    sand.addColorStop(0,'#f1d7a5'); sand.addColorStop(1,'#d9b777');
    ctx.fillStyle = sand; ctx.fillRect(0,sandY,W,H-sandY);

    // shoreline foam
    for(let i=0;i<3;i++){
      const y = sandY - i*5*DPR;
      const amp = (6 - i*1.4)*DPR; const k = 0.03 + i*0.004; const sp = 1.4 + i*0.25;
      ctx.beginPath();
      for(let x=0;x<=W;x+=4*DPR){
        const yy = y + Math.sin(x*k + t*sp)*amp;
        if(x===0) ctx.moveTo(x,yy); else ctx.lineTo(x,yy);
      }
      ctx.strokeStyle = `rgba(255,255,255,${0.25 - i*0.08})`;
      ctx.lineWidth = (2 - i*0.3)*DPR; ctx.stroke();
    }

    t += 0.025; requestAnimationFrame(draw);
  }
  draw();
})();

// ==================================================
// STARS + SHOOTING STARS (smooth arcs, 2â€“7s)
// ==================================================
(function stars(){
  const canvas = document.getElementById('stars');
  const ctx = canvas.getContext('2d');
  let W=0,H=0, starfield=[], shooters=[], nextSpawn=0;
  function resize(){ sizeCanvas(canvas); W=canvas.width; H=canvas.height; makeStars(); }
  function makeStars(){
    const count = Math.max(120, Math.floor((canvas.clientWidth*canvas.clientHeight)/1800));
    starfield = Array.from({length:count},()=>({
      x: Math.random()*W, y: Math.random()*H*0.6, r: (Math.random()*1.2+0.3)*DPR,
      a: Math.random()*Math.PI*2, tw: (Math.random()*0.012+0.004)
    }));
  }
  function spawnShooter(){
    const sx = rand(W*0.15, W*0.85), sy = rand(H*0.08, H*0.35);
    const speed = rand(8,12)*DPR; // initial speed
    const angle = rand(-Math.PI*0.18, -Math.PI*0.05); // mostly left/up
    shooters.push({ x:sx, y:sy, vx: Math.cos(angle)*speed, vy: Math.sin(angle)*speed, g: 0.12*DPR, life: 90, trail: [] });
    nextSpawn = performance.now() + (2000 + Math.random()*5000); // 2â€“7s
  }
  function step(){
    const now = performance.now();
    if(now>nextSpawn) spawnShooter();
    ctx.clearRect(0,0,W,H);
    // twinkling stars
    for(const s of starfield){ s.a+=s.tw; const alpha = 0.6 + Math.sin(s.a)*0.35; ctx.globalAlpha=alpha; ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fillStyle='#fff'; ctx.fill(); }
    ctx.globalAlpha=1;
    // shooters with glowing trail
    shooters = shooters.filter(s=>s.life>0);
    for(const sh of shooters){
      sh.trail.unshift({x:sh.x,y:sh.y}); if(sh.trail.length>16) sh.trail.pop();
      // draw trail
      for(let i=0;i<sh.trail.length-1;i++){
        const p1 = sh.trail[i], p2 = sh.trail[i+1];
        const a = (1 - i/sh.trail.length) * 0.9;
        const grad = ctx.createLinearGradient(p1.x,p1.y,p2.x,p2.y);
        grad.addColorStop(0,`rgba(255,255,255,${a})`);
        grad.addColorStop(1,'rgba(255,255,255,0)');
        ctx.strokeStyle = grad; ctx.lineWidth = (2.2 - i*0.1)*DPR; ctx.beginPath(); ctx.moveTo(p1.x,p1.y); ctx.lineTo(p2.x,p2.y); ctx.stroke();
      }
      // head
      ctx.beginPath(); ctx.arc(sh.x,sh.y,1.8*DPR,0,Math.PI*2); ctx.fillStyle='#fff'; ctx.shadowBlur=12*DPR; ctx.shadowColor='#fff'; ctx.fill(); ctx.shadowBlur=0;
      // physics for arc
      sh.x += sh.vx; sh.y += sh.vy; sh.vy += sh.g; sh.life--;
    }
    requestAnimationFrame(step);
  }
  window.addEventListener('resize', resize); resize(); nextSpawn = performance.now() + (2000 + Math.random()*5000); step();
})();

// ==================================================
// FIREWORKS (pure JS, whole sky, bursts for ~6s)
// ==================================================
(function fireworks(){
  const canvas = document.getElementById('fireworks');
  const ctx = canvas.getContext('2d');
  let W=0,H=0, particles=[]; let running=false, endTime=0;
  function resize(){ sizeCanvas(canvas); W=canvas.width; H=canvas.height; }
  window.addEventListener('resize', resize); resize();

  class Particle{
    constructor(x,y,color){
      const ang = rand(0,Math.PI*2);
      const spd = rand(2.2,6.5)*DPR;
      this.x=x; this.y=y; this.vx=Math.cos(ang)*spd; this.vy=Math.sin(ang)*spd;
      this.life=rand(55,95); this.alpha=1; this.color=color; this.size=rand(1,2)*DPR; this.gravity=0.04*DPR; this.friction=0.985;
    }
    step(){ this.vx*=this.friction; this.vy=this.vy*this.friction + this.gravity; this.x+=this.vx; this.y+=this.vy; this.life--; this.alpha = Math.max(0, this.life/100); }
    draw(){ ctx.globalAlpha=this.alpha; ctx.fillStyle=this.color; ctx.beginPath(); ctx.arc(this.x,this.y,this.size,0,Math.PI*2); ctx.fill(); }
  }

  function burst(x,y){
    const palette = ['#ff5252','#ffd166','#06d6a0','#4cc9f0','#b5179e','#f72585','#ffe66d','#8cff66'];
    const color = palette[Math.floor(Math.random()*palette.length)];
    const count = Math.floor(rand(60,100));
    for(let i=0;i<count;i++) particles.push(new Particle(x,y,color));
  }

  function launchRandom(){ burst(rand(W*0.05,W*0.95), rand(H*0.05,H*0.55)); }

  function loop(){
    ctx.clearRect(0,0,W,H);
    for(let i=particles.length-1;i>=0;i--){ const p=particles[i]; p.step(); p.draw(); if(p.life<=0) particles.splice(i,1); }
    if(running){
      // while running, keep adding random bursts
      if(Math.random()<0.18) launchRandom();
      if(performance.now()>endTime) running=false;
    }
    requestAnimationFrame(loop);
  }
  loop();

  // public trigger on button click
  const sayYesButton = document.getElementById('sayYes');
  const inviteMessage = document.getElementById('invite-message');
  sayYesButton.addEventListener('click', ()=>{
    inviteMessage.style.display='block';
    running = true; endTime = performance.now() + 6000; // ~6 seconds
    // kick off with a few immediate bursts
    for(let i=0;i<4;i++) launchRandom();
  });
})();
</script>
</body>
</html>
